var DataFortress=DataFortress||{};DataFortress.Connection=new function(){var v="v1.1";var E="https://df.uol.com.br";var c="/df-fe/mvc/creditcard";var A="/v1/";var x="/v3/";var C;var B=function(F,G){return $.inArray(F,G)};var o=function(F){$.ajax(F)};var D=function(F){return F.replace(/\s/g,"")};var w=function(F){E=F};var g=function(F){window.dataFortressForbiddenRequest=function(G){var H=typeof G.safeCheckoutResponse=="object"?G.safeCheckoutResponse:false;var I=H?H.requestId:"";if(typeof F=="function"){F({safeCheckoutResponse:{requestId:I,status:"forbidden",code:"forbidden",message:"forbidden request",result:{}}})}}};var h=function(H){var F=(E+c+H.versionPath+H.service);var I=$.param(H.params);var G=21000;o({url:F,data:I,cache:false,crossDomain:true,dataType:"jsonp",timeout:G,success:function(J){H.callback(J)},error:function(J,L,K){H.error({url:F,textStatus:L,status:J.status,statusText:J.statusText,responseText:J.responseText})}})};var l={origin:{type:"string",defaultValue:"",filter:false},tk:{type:"string",defaultValue:"",filter:false},owner:{type:"string",defaultValue:"",filter:false},brand:{type:"string",defaultValue:"",filter:false},creditCard:{type:"string",defaultValue:"",filter:D},cvv:{type:"string",defaultValue:"",filter:D},expMonth:{type:"string",defaultValue:"",filter:false},expYear:{type:"string",defaultValue:"",filter:false},dateMandatory:{type:"boolean",defaultValue:"",filter:false},durableToken:{type:"string",defaultValue:"",filter:false},pans:{type:"string",defaultValue:"",filter:false},transientToken:{type:"string",defaultValue:"",filter:false}};var r=function(I,H){var G={};for(var J in H){if(B(J,I)){var F=l[J];G[J]=(typeof H[J]==F.type)?H[J]:F.defaultValue;if(typeof F.filter=="function"){G[J]=F.filter(G[J])}}else{G[J]=H[J]}}return G};var y=function(J,F,I){if(F&&I){try{var H=dfCrypto.rsaEncrypt(F,I,J.creditCard+"|"+J.cvv);if(H&&H.cipherText){C={modulus:F,exponent:I};J["encrypted-cc"]=H.cipherText;delete J.creditCard;delete J.cvv}else{J.cryptoError='"Error in rsaEncrypt function."'}}catch(G){J.cryptoError='"Error in cryptParams function ('+G+')."'}}else{J.cryptoError='"Error in cryptParams function (modulus='+F+", exponent="+I+')"'}return J};var p=function(H){var F=new Date().getTime();var G=Boolean(H&&F)?((F-H)/1000):false;return{start:H,end:F,seconds:G}};var i=function(F,J,K,G,I){J.jsVersion=v;var H=new Date().getTime();h({service:F,params:J,callback:function(L){K(L)},error:function(L){if(typeof L=="object"){L.time=p(H)}G(L)},versionPath:I})};var k=function(G,F,I,J,K){g(I.callback);var L=r(F,I.data);if(J){if(!C||!C.modulus||!C.exponent){d({data:{origin:L.origin,tk:L.tk,owner:L.owner},callback:function(N){var M=y(L,N.modulus,N.exponent);i(G,M,I.callback,I.error,K)},error:function(M){L.cryptoError='"Error getting public key"';i(G,L,I.callback,I.error,K)}})}else{var H=y(L,C.modulus,C.exponent);i(G,H,I.callback,I.error,K)}}else{i(G,L,I.callback,I.error,K)}};var m=function(G,H,I){var F=6;if(!G.options.data.creditCard||G.options.data.creditCard.length<F){G.options.callback(new z())}else{I(G.service,G.requiredData,G.options,false,H)}};function z(){var F={reasonMessage:"Bin not found",statusMessage:"Error"};this.bin=F}function b(G,F,H){this.service=G;this.requiredData=F;this.options=H}var d=function(F){i("getPublicKey",F.data,F.callback,F.error,A)};var t=function(H){var G="token/getToken/cc";var F=["origin","tk","owner","brand","creditCard","cvv","expMonth","expYear","dateMandatory"];k(G,F,H,true,A)};var j=function(H){var G="token/getDurable/cc";var F=["origin","tk","owner","brand","creditCard","cvv","expMonth","expYear","dateMandatory"];k(G,F,H,true,A)};var u=function(H){var G="token/getToken/durable";var F=["origin","tk","owner","cvv","durableToken"];k(G,F,H,false,A)};var e=function(H){var G="token/getDurable/transient";var F=["origin","tk","owner","cvv","transientToken"];k(G,F,H,false,A)};var s=function(H){var G="getBin";var F=["origin","tk","owner","creditCard"];m(new b(G,F,H),A,k)};var q=function(H){var G="getBin";var F=["origin","tk","owner","creditCard"];m(new b(G,F,H),x,k)};var f=function(H){var G="pagSeguroGetBin";var F=["origin","tk","owner","creditCard"];k(G,F,H,false,A)};var a=function(H){var G="getGlobalBin";var F=["origin","tk","owner","creditCard"];m(new b(G,F,H),A,k)};var n=function(H){var G="hashLot";var F=["pans","tk"];k(G,F,H,false,A)};return{getTransientToken:t,getDurableToken:j,getTransientByDurableToken:u,getDurableTokenByTransient:e,setDomain:w,getCardData:s,getCardDataPs:f,getCardDataV3:q,getCardGlobalData:a,hashLot:n,domain:E,servicePath:c,versionPath:A}};var sendLogDfError=function(a){var b=new Image();b.src=(DataFortress.Connection.domain+"/df-fe/mvc/v1/jsLog?mensagem="+a)};$(document).ready(function(){if(typeof processDfClient!="undefined"){processDfClient()}else{sendLogDfError("Error in processDfclient. The function is undefined")}});
var dfCrypto=new function(){this.rsaEncrypt=function(aD,aA,aE){var aC=aD;var az=aA;var ax=aE;var z=new Date().getTime();var ay=new K();ay.setPublic(aC,az);var aB=ay.encrypt(ax);var t=new Date().getTime();delay=t-z;return{cipherText:aB,delay:delay}};function g(z,t){return new ao(z,t)}function ad(ay,aB){if(aB<ay.length+11){throw"Message too long for RSA";return null}var aA=new Array();var ax=ay.length-1;while(ax>=0&&aB>0){var az=ay.charCodeAt(ax--);if(az<128){aA[--aB]=az}else{if((az>127)&&(az<2048)){aA[--aB]=(az&63)|128;aA[--aB]=(az>>6)|192}else{aA[--aB]=(az&63)|128;aA[--aB]=((az>>6)&63)|128;aA[--aB]=(az>>12)|224}}}aA[--aB]=0;var z=new ab();var t=new Array();while(aB>2){t[0]=0;while(t[0]==0){z.nextBytes(t)}aA[--aB]=t[0]}aA[--aB]=2;aA[--aB]=0;return new ao(aA)}function K(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null}function o(z,t){if(z!=null&&t!=null&&z.length>0&&t.length>0){this.n=g(z,16);this.e=parseInt(t,16)}else{throw"Invalid RSA public key"}}function U(t){return t.modPowInt(this.e,this.n)}function p(ax){var t=ad(ax,(this.n.bitLength()+7)>>3);if(t==null){return null}var ay=this.doPublic(t);if(ay==null){return null}var z=ay.toString(16);if((z.length&1)==0){return z}else{return"0"+z}}K.prototype.doPublic=U;K.prototype.setPublic=o;K.prototype.encrypt=p;function k(){this.i=0;this.j=0;this.S=new Array()}function e(az){var ay,z,ax;for(ay=0;ay<256;++ay){this.S[ay]=ay}z=0;for(ay=0;ay<256;++ay){z=(z+this.S[ay]+az[ay%az.length])&255;ax=this.S[ay];this.S[ay]=this.S[z];this.S[z]=ax}this.i=0;this.j=0}function a(){var z;this.i=(this.i+1)&255;this.j=(this.j+this.S[this.i])&255;z=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=z;return this.S[(z+this.S[this.i])&255]}k.prototype.init=e;k.prototype.next=a;function al(){return new k()}var L=256;var m;var S;var aa;function c(t){S[aa++]^=t&255;S[aa++]^=(t>>8)&255;S[aa++]^=(t>>16)&255;S[aa++]^=(t>>24)&255;if(aa>=L){aa-=L}}function R(){c(new Date().getTime())}if(S==null){S=new Array();aa=0;var H;if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto){var E=window.crypto.random(32);for(H=0;H<E.length;++H){S[aa++]=E.charCodeAt(H)&255}}while(aa<L){H=Math.floor(65536*Math.random());S[aa++]=H>>>8;S[aa++]=H&255}aa=0;R()}function B(){if(m==null){R();m=al();m.init(S);for(aa=0;aa<S.length;++aa){S[aa]=0}aa=0}return m.next()}function ar(z){var t;for(t=0;t<z.length;++t){z[t]=B()}}function ab(){}ab.prototype.nextBytes=ar;var at;var af=244837814094590;var X=((af&16777215)==15715070);function ao(z,t,ax){if(z!=null){if("number"==typeof z){this.fromNumber(z,t,ax)}else{if(t==null&&"string"!=typeof z){this.fromString(z,256)}else{this.fromString(z,t)}}}}function h(){return new ao(null)}function b(az,t,z,ay,aB,aA){while(--aA>=0){var ax=t*this[az++]+z[ay]+aB;aB=Math.floor(ax/67108864);z[ay++]=ax&67108863}return aB}function av(az,aE,aF,ay,aC,t){var aB=aE&32767,aD=aE>>15;while(--t>=0){var ax=this[az]&32767;var aA=this[az++]>>15;var z=aD*ax+aA*aB;ax=aB*ax+((z&32767)<<15)+aF[ay]+(aC&1073741823);aC=(ax>>>30)+(z>>>15)+aD*aA+(aC>>>30);aF[ay++]=ax&1073741823}return aC}function au(az,aE,aF,ay,aC,t){var aB=aE&16383,aD=aE>>14;while(--t>=0){var ax=this[az]&16383;var aA=this[az++]>>14;var z=aD*ax+aA*aB;ax=aB*ax+((z&16383)<<14)+aF[ay]+aC;aC=(ax>>28)+(z>>14)+aD*aA;aF[ay++]=ax&268435455}return aC}if(X&&(navigator.appName=="Microsoft Internet Explorer")){ao.prototype.am=av;at=30}else{if(X&&(navigator.appName!="Netscape")){ao.prototype.am=b;at=26}else{ao.prototype.am=au;at=28}}ao.prototype.DB=at;ao.prototype.DM=((1<<at)-1);ao.prototype.DV=(1<<at);var Y=52;ao.prototype.FV=Math.pow(2,Y);ao.prototype.F1=Y-at;ao.prototype.F2=2*at-Y;var ac="0123456789abcdefghijklmnopqrstuvwxyz";var ae=new Array();var am,u;am="0".charCodeAt(0);for(u=0;u<=9;++u){ae[am++]=u}am="a".charCodeAt(0);for(u=10;u<36;++u){ae[am++]=u}am="A".charCodeAt(0);for(u=10;u<36;++u){ae[am++]=u}function aw(t){return ac.charAt(t)}function y(z,t){var ax=ae[z.charCodeAt(t)];return(ax==null)?-1:ax}function W(z){for(var t=this.t-1;t>=0;--t){z[t]=this[t]}z.t=this.t;z.s=this.s}function n(t){this.t=1;this.s=(t<0)?-1:0;if(t>0){this[0]=t}else{if(t<-1){this[0]=t+DV}else{this.t=0}}}function d(t){var z=h();z.fromInt(t);return z}function v(aB,z){var ay;if(z==16){ay=4}else{if(z==8){ay=3}else{if(z==256){ay=8}else{if(z==2){ay=1}else{if(z==32){ay=5}else{if(z==4){ay=2}else{this.fromRadix(aB,z);return}}}}}}this.t=0;this.s=0;var aA=aB.length,ax=false,az=0;while(--aA>=0){var t=(ay==8)?aB[aA]&255:y(aB,aA);if(t<0){if(aB.charAt(aA)=="-"){ax=true}continue}ax=false;if(az==0){this[this.t++]=t}else{if(az+ay>this.DB){this[this.t-1]|=(t&((1<<(this.DB-az))-1))<<az;this[this.t++]=(t>>(this.DB-az))}else{this[this.t-1]|=t<<az}}az+=ay;if(az>=this.DB){az-=this.DB}}if(ay==8&&(aB[0]&128)!=0){this.s=-1;if(az>0){this[this.t-1]|=((1<<(this.DB-az))-1)<<az}}this.clamp();if(ax){ao.ZERO.subTo(this,this)}}function N(){var t=this.s&this.DM;while(this.t>0&&this[this.t-1]==t){--this.t}}function q(z){if(this.s<0){return"-"+this.negate().toString(z)}var ax;if(z==16){ax=4}else{if(z==8){ax=3}else{if(z==2){ax=1}else{if(z==32){ax=5}else{if(z==4){ax=2}else{return this.toRadix(z)}}}}}var az=(1<<ax)-1,aC,t=false,aA="",ay=this.t;var aB=this.DB-(ay*this.DB)%ax;if(ay-->0){if(aB<this.DB&&(aC=this[ay]>>aB)>0){t=true;aA=aw(aC)}while(ay>=0){if(aB<ax){aC=(this[ay]&((1<<aB)-1))<<(ax-aB);aC|=this[--ay]>>(aB+=this.DB-ax)}else{aC=(this[ay]>>(aB-=ax))&az;if(aB<=0){aB+=this.DB;--ay}}if(aC>0){t=true}if(t){aA+=aw(aC)}}}return t?aA:"0"}function Q(){var t=h();ao.ZERO.subTo(this,t);return t}function ai(){return(this.s<0)?this.negate():this}function F(t){var ax=this.s-t.s;if(ax!=0){return ax}var z=this.t;ax=z-t.t;if(ax!=0){return(this.s<0)?-ax:ax}while(--z>=0){if((ax=this[z]-t[z])!=0){return ax}}return 0}function j(z){var ay=1,ax;if((ax=z>>>16)!=0){z=ax;ay+=16}if((ax=z>>8)!=0){z=ax;ay+=8}if((ax=z>>4)!=0){z=ax;ay+=4}if((ax=z>>2)!=0){z=ax;ay+=2}if((ax=z>>1)!=0){z=ax;ay+=1}return ay}function s(){if(this.t<=0){return 0}return this.DB*(this.t-1)+j(this[this.t-1]^(this.s&this.DM))}function an(ax,z){var t;for(t=this.t-1;t>=0;--t){z[t+ax]=this[t]}for(t=ax-1;t>=0;--t){z[t]=0}z.t=this.t+ax;z.s=this.s}function V(ax,z){for(var t=ax;t<this.t;++t){z[t-ax]=this[t]}z.t=Math.max(this.t-ax,0);z.s=this.s}function r(aC,ay){var z=aC%this.DB;var t=this.DB-z;var aA=(1<<t)-1;var az=Math.floor(aC/this.DB),aB=(this.s<<z)&this.DM,ax;for(ax=this.t-1;ax>=0;--ax){ay[ax+az+1]=(this[ax]>>t)|aB;aB=(this[ax]&aA)<<z}for(ax=az-1;ax>=0;--ax){ay[ax]=0}ay[az]=aB;ay.t=this.t+az+1;ay.s=this.s;ay.clamp()}function l(aB,ay){ay.s=this.s;var az=Math.floor(aB/this.DB);if(az>=this.t){ay.t=0;return}var z=aB%this.DB;var t=this.DB-z;var aA=(1<<z)-1;ay[0]=this[az]>>z;for(var ax=az+1;ax<this.t;++ax){ay[ax-az-1]|=(this[ax]&aA)<<t;ay[ax-az]=this[ax]>>z}if(z>0){ay[this.t-az-1]|=(this.s&aA)<<t}ay.t=this.t-az;ay.clamp()}function Z(z,ay){var ax=0,az=0,t=Math.min(z.t,this.t);while(ax<t){az+=this[ax]-z[ax];ay[ax++]=az&this.DM;az>>=this.DB}if(z.t<this.t){az-=z.s;while(ax<this.t){az+=this[ax];ay[ax++]=az&this.DM;az>>=this.DB}az+=this.s}else{az+=this.s;while(ax<z.t){az-=z[ax];ay[ax++]=az&this.DM;az>>=this.DB}az-=z.s}ay.s=(az<0)?-1:0;if(az<-1){ay[ax++]=this.DV+az}else{if(az>0){ay[ax++]=az}}ay.t=ax;ay.clamp()}function C(z,ay){var t=this.abs(),az=z.abs();var ax=t.t;ay.t=ax+az.t;while(--ax>=0){ay[ax]=0}for(ax=0;ax<az.t;++ax){ay[ax+t.t]=t.am(0,az[ax],ay,ax,0,t.t)}ay.s=0;ay.clamp();if(this.s!=z.s){ao.ZERO.subTo(ay,ay)}}function P(ax){var t=this.abs();var z=ax.t=2*t.t;while(--z>=0){ax[z]=0}for(z=0;z<t.t-1;++z){var ay=t.am(z,t[z],ax,2*z,0,1);if((ax[z+t.t]+=t.am(z+1,2*t[z],ax,2*z+1,ay,t.t-z-1))>=t.DV){ax[z+t.t]-=t.DV;ax[z+t.t+1]=1}}if(ax.t>0){ax[ax.t-1]+=t.am(z,t[z],ax,2*z,0,1)}ax.s=0;ax.clamp()}function D(aF,aC,aB){var aL=aF.abs();if(aL.t<=0){return}var aD=this.abs();if(aD.t<aL.t){if(aC!=null){aC.fromInt(0)}if(aB!=null){this.copyTo(aB)}return}if(aB==null){aB=h()}var az=h(),z=this.s,aE=aF.s;var aK=this.DB-j(aL[aL.t-1]);if(aK>0){aL.lShiftTo(aK,az);aD.lShiftTo(aK,aB)}else{aL.copyTo(az);aD.copyTo(aB)}var aH=az.t;var ax=az[aH-1];if(ax==0){return}var aG=ax*(1<<this.F1)+((aH>1)?az[aH-2]>>this.F2:0);var aO=this.FV/aG,aN=(1<<this.F1)/aG,aM=1<<this.F2;var aJ=aB.t,aI=aJ-aH,aA=(aC==null)?h():aC;az.dlShiftTo(aI,aA);if(aB.compareTo(aA)>=0){aB[aB.t++]=1;aB.subTo(aA,aB)}ao.ONE.dlShiftTo(aH,aA);aA.subTo(az,az);while(az.t<aH){az[az.t++]=0}while(--aI>=0){var ay=(aB[--aJ]==ax)?this.DM:Math.floor(aB[aJ]*aO+(aB[aJ-1]+aM)*aN);if((aB[aJ]+=az.am(0,ay,aB,aI,0,aH))<ay){az.dlShiftTo(aI,aA);aB.subTo(aA,aB);while(aB[aJ]<--ay){aB.subTo(aA,aB)}}}if(aC!=null){aB.drShiftTo(aH,aC);if(z!=aE){ao.ZERO.subTo(aC,aC)}}aB.t=aH;aB.clamp();if(aK>0){aB.rShiftTo(aK,aB)}if(z<0){ao.ZERO.subTo(aB,aB)}}function M(t){var z=h();this.abs().divRemTo(t,null,z);if(this.s<0&&z.compareTo(ao.ZERO)>0){t.subTo(z,z)}return z}function J(t){this.m=t}function T(t){if(t.s<0||t.compareTo(this.m)>=0){return t.mod(this.m)}else{return t}}function ah(t){return t}function I(t){t.divRemTo(this.m,null,t)}function G(t,ax,z){t.multiplyTo(ax,z);this.reduce(z)}function aq(t,z){t.squareTo(z);this.reduce(z)}J.prototype.convert=T;J.prototype.revert=ah;J.prototype.reduce=I;J.prototype.mulTo=G;J.prototype.sqrTo=aq;function A(){if(this.t<1){return 0}var t=this[0];if((t&1)==0){return 0}var z=t&3;z=(z*(2-(t&15)*z))&15;z=(z*(2-(t&255)*z))&255;z=(z*(2-(((t&65535)*z)&65535)))&65535;z=(z*(2-t*z%this.DV))%this.DV;return(z>0)?this.DV-z:-z}function f(t){this.m=t;this.mp=t.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<(t.DB-15))-1;this.mt2=2*t.t}function ag(t){var z=h();t.abs().dlShiftTo(this.m.t,z);z.divRemTo(this.m,null,z);if(t.s<0&&z.compareTo(ao.ZERO)>0){this.m.subTo(z,z)}return z}function ap(t){var z=h();t.copyTo(z);this.reduce(z);return z}function O(t){while(t.t<=this.mt2){t[t.t++]=0}for(var ax=0;ax<this.m.t;++ax){var z=t[ax]&32767;var ay=(z*this.mpl+(((z*this.mph+(t[ax]>>15)*this.mpl)&this.um)<<15))&t.DM;z=ax+this.m.t;t[z]+=this.m.am(0,ay,t,ax,0,this.m.t);while(t[z]>=t.DV){t[z]-=t.DV;t[++z]++}}t.clamp();t.drShiftTo(this.m.t,t);if(t.compareTo(this.m)>=0){t.subTo(this.m,t)}}function aj(t,z){t.squareTo(z);this.reduce(z)}function x(t,ax,z){t.multiplyTo(ax,z);this.reduce(z)}f.prototype.convert=ag;f.prototype.revert=ap;f.prototype.reduce=O;f.prototype.mulTo=x;f.prototype.sqrTo=aj;function i(){return((this.t>0)?(this[0]&1):this.s)==0}function w(aC,aD){if(aC>4294967295||aC<1){return ao.ONE}var aB=h(),ax=h(),aA=aD.convert(this),az=j(aC)-1;aA.copyTo(aB);while(--az>=0){aD.sqrTo(aB,ax);if((aC&(1<<az))>0){aD.mulTo(ax,aA,aB)}else{var ay=aB;aB=ax;ax=ay}}return aD.revert(aB)}function ak(ax,t){var ay;if(ax<256||t.isEven()){ay=new J(t)}else{ay=new f(t)}return this.exp(ax,ay)}ao.prototype.copyTo=W;ao.prototype.fromInt=n;ao.prototype.fromString=v;ao.prototype.clamp=N;ao.prototype.dlShiftTo=an;ao.prototype.drShiftTo=V;ao.prototype.lShiftTo=r;ao.prototype.rShiftTo=l;ao.prototype.subTo=Z;ao.prototype.multiplyTo=C;ao.prototype.squareTo=P;ao.prototype.divRemTo=D;ao.prototype.invDigit=A;ao.prototype.isEven=i;ao.prototype.exp=w;ao.prototype.toString=q;ao.prototype.negate=Q;ao.prototype.abs=ai;ao.prototype.compareTo=F;ao.prototype.bitLength=s;ao.prototype.mod=M;ao.prototype.modPowInt=ak;ao.ZERO=d(0);ao.ONE=d(1)};
